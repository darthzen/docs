<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Planning an OpenStack Deployment | SUSE OpenStack Cloud 7</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.0" /><meta name="product-name" content="SUSE OpenStack Cloud" /><meta name="product-number" content="7" /><meta name="book-title" content="Planning an OpenStack Deployment" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="single offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs inactive"><a class="single-crumb" href="#book.cloud.planning" accesskey="c"><span class="single-contents-icon"></span>Planning an OpenStack Deployment</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs inactive"><a class="single-crumb" href="#book.cloud.planning" accesskey="c"><span class="single-contents-icon"></span>Show Contents: Planning an OpenStack Deployment</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="#cha.introduction"><span class="number">1 </span><span class="name">Introduction</span></a></li><li class="inactive"><a href="#cha.preliminary"><span class="number">2 </span><span class="name">Preliminary Considerations</span></a></li><li class="inactive"><a href="#cha.poc"><span class="number">3 </span><span class="name">Performing a Proof-of-Concept</span></a></li><li class="inactive"><a href="#cha.worksheet"><span class="number">4 </span><span class="name">Worksheet</span></a></li><li class="inactive"><a href="#cha.production"><span class="number">5 </span><span class="name">Going from Proof-of-Concept to Production</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class=""><div class="documentation"><div xml:lang="en" class="book" id="book.cloud.planning" lang="en"><div class="titlepage"><div><h6 class="version-info"><span class="productname ">SUSE OpenStack Cloud</span> <span class="productnumber ">7</span></h6><div><h1 class="title">Planning an OpenStack Deployment</h1></div><div><h2 class="subtitle">generated by DAPS</h2></div><div class="authorgroup"><div><span class="imprint-label">Authors: </span><span class="firstname ">Rick</span> <span class="surname ">Ashford</span> and <span class="firstname ">Cameron</span> <span class="surname ">Seader</span></div></div><div class="date"><span class="imprint-label">Publication Date: </span>
                February 08, 2017

            , <span class="imprint-label">Version: </span>Version 0.1</div></div></div><div class="toc"><dl><dt><span class="chapter"><a href="#cha.introduction"><span class="number">1 </span><span class="name">Introduction</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.introduction.why"><span class="number">1.1 </span><span class="name">Why do I need this?</span></a></span></dt><dt><span class="sect1"><a href="#sec.introduction.what"><span class="number">1.2 </span><span class="name">What is the intent of this document?</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.preliminary"><span class="number">2 </span><span class="name">Preliminary Considerations</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.preliminary.philosophy"><span class="number">2.1 </span><span class="name">Know Your Philosophy</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.poc"><span class="number">3 </span><span class="name">Performing a Proof-of-Concept</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.poc.steps"><span class="number">3.1 </span><span class="name">Pre-POC planning meeting</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.worksheet"><span class="number">4 </span><span class="name">Worksheet</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sect.worksheet.ha"><span class="number">4.1 </span><span class="name">High-Availability</span></a></span></dt><dt><span class="sect1"><a href="#sect.worksheet.net"><span class="number">4.2 </span><span class="name">Networking</span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#cha.production"><span class="number">5 </span><span class="name">Going from Proof-of-Concept to Production</span></a></span></dt><dd><dl><dt><span class="sect1"><a href="#sec.production.patching"><span class="number">5.1 </span><span class="name">Patching Strategy</span></a></span></dt><dt><span class="sect1"><a href="#sec.production.operations"><span class="number">5.2 </span><span class="name">Operational Planning</span></a></span></dt></dl></dd></dl></div><div class="list-of-tables"><div class="toc-title">List of Tables</div><dl><dt><span class="table"><a href="#id1498"><span class="number">4.1 </span><span class="name">Admin/BMC Network Address Allocation</span></a></span></dt><dt><span class="table"><a href="#id1607"><span class="number">4.2 </span><span class="name">Bastion Network Address Allocation</span></a></span></dt><dt><span class="table"><a href="#id1639"><span class="number">4.3 </span><span class="name">Storage Network Address Allocation</span></a></span></dt><dt><span class="table"><a href="#id1671"><span class="number">4.4 </span><span class="name">Fixed Network Address Allocation</span></a></span></dt><dt><span class="table"><a href="#id1725"><span class="number">4.5 </span><span class="name">Public/Floating Network Address Allocation</span></a></span></dt><dt><span class="table"><a href="#id1801"><span class="number">4.6 </span><span class="name">Software-Defined Networking (SDN) Address Allocation</span></a></span></dt></dl></div><div><div class="legalnotice" id="id1355"><p>
                    <a class="link" href="http://www.gnu.org/licenses/fdl-1.3-standalone.html" target="_blank">GNU Free Documentation License</a>
                </p></div></div><div class="chapter " id="cha.introduction"><div class="titlepage"><div><div><h1 class="title"><span class="number">1 </span><span class="name">Introduction</span> <a title="Permalink" class="permalink" href="#cha.introduction">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.introduction.why"><span class="number">1.1 </span><span class="name">Why do I need this?</span></a></span></dt><dt><span class="sect1"><a href="#sec.introduction.what"><span class="number">1.2 </span><span class="name">What is the intent of this document?</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.introduction.why"><div class="titlepage"><div><div><h2 class="title" id="sec.introduction.why"><span class="number">1.1 </span><span class="name">Why do I need this?</span> <a title="Permalink" class="permalink" href="#sec.introduction.why">#</a></h2></div></div></div><p>
                    The actual physical implementation and deployment of your cloud will be the shortest part of the whole project to get it up and running. The vast majority of your project time will be spent in conference rooms with whiteboards and take-out food
                    hashing out the details of what this project is going to look like. The cloud project will require the cooperation and input from a wide variety of sources, such as the storage team, network team, physical infrastructure management, end-users, legal,
                    procurement and more. Without this coordinated effort, users will get frustrated, your project will not be successful, and the whole thing is doomed from the start.
                </p></div><div class="sect1 " id="sec.introduction.what"><div class="titlepage"><div><div><h2 class="title" id="sec.introduction.what"><span class="number">1.2 </span><span class="name">What is the intent of this document?</span> <a title="Permalink" class="permalink" href="#sec.introduction.what">#</a></h2></div></div></div><p>
                    This document is intended as a starting point for a SUSE OpenStack Cloud implementation. Use this guide as a guide to help you prepare for deployment and as a worksheet as you discuss how to configure SUSE OpenStack Cloud for your environment.
                </p><p>
                    The items below are discussed in greater detail in the SUSE OpenStack Cloud deployment guide. Reference the deployment guide for an understanding of the terms and clarification. Throughout the document you will see references to the section(s) in the
                    deployment guide.
                </p><p>
                    As of the time of this writing, the current version is SUSE OpenStack Cloud 7 (Newton-based release). Deployment guide links are based off of this version and may need to be adjusted for subsequent product versions.
                </p><p>
                    Community documentation may be found on the OpenStack site,
                    <a class="link" href="http://docs.openstack.org/" target="_blank">http://docs.openstack.org/</a>. All SUSE-provided documentation, including the deployment guide, is available at:
                    <a class="link" href="https://www.suse.com/documentation/suse-cloud-7/" target="_blank">https://www.suse.com/documentation/suse-cloud-7/</a>
                </p></div></div><div class="chapter " id="cha.preliminary"><div class="titlepage"><div><div><h1 class="title"><span class="number">2 </span><span class="name">Preliminary Considerations</span> <a title="Permalink" class="permalink" href="#cha.preliminary">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.preliminary.philosophy"><span class="number">2.1 </span><span class="name">Know Your Philosophy</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.preliminary.philosophy"><div class="titlepage"><div><div><h2 class="title" id="sec.preliminary.philosophy"><span class="number">2.1 </span><span class="name">Know Your Philosophy</span> <a title="Permalink" class="permalink" href="#sec.preliminary.philosophy">#</a></h2></div></div></div><p>Before you begin planning the technical details of your implementation, there are several overarching questions you will want to consider that will directly impact the overall architecture</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>What problem are you trying to solve by implementing a private Infrastructure-as-a-service (IaaS) cloud?</p></li><li class="listitem "><p>Who are the users of your cloud? What do they want out of it?</p></li><li class="listitem "><p>What are your business and technical requirements?</p></li><li class="listitem "><p>What are the constraints for this project?</p></li><li class="listitem "><p>What additional resources will you require to have a successful deployment?</p></li></ul></div><div class="sect2 " id="sec.preliminary.philosophy.problem"><div class="titlepage"><div><div><h3 class="title" id="sec.preliminary.philosophy.problem"><span class="number">2.1.1 </span><span class="name">What problem are you trying to solve?</span> <a title="Permalink" class="permalink" href="#sec.preliminary.philosophy.problem">#</a></h3></div></div></div><p>This question is probably the most vital one to know before you begin planning your cloud. If you don't know what the goal is that you are trying to accomplish, your likelihood of achieving it is dramatically reduced.</p><p>If, for example, your overall goal is to provide a playground for your developers so they will stop annoying IT with constant requests for additional resources, you will make dramatically different decisions than if your overall goal is to
                        streamline your production environment processes.</p><p>In the first scenario, you would probably have a single, non-commercial hypervisor such as KVM or Xen. You would likely be looking to implement a relatively cheap backend for volume storage, and high-availability of your control plane may not
                        be significant. You would not likely need to have a large address space reserved for floating IP addresses to expose your cloud workloads to the outside world.</p><p>In the second scenario, a production environment, you will be much more stringent in your requirements. You will likely need multiple hypervisors to accommodate varying virtual environments (ie – production will be on VMware, developers will
                        have the cheaper KVM environment, and Windows workloads will be deployed on Hyper-V to maximise the efficiency of licensing costs). You will likely be looking for a more reliable storage infrastructure, leveraging a SAN instead of using local disk
                        storage. You may even have several storage backends that you need to accommodate. You will likely need to reserve a significant number of IP addresses for exposing these production workloads to the outside world.</p><p>Without understanding exactly what you are trying to accomplish with your cloud implementation, you are much more likely to make decisions that will be sub-optimal, which may result in significant costs (in time and money) to rectify.
                        Establishing a correct course here will inform every other decision you make for the better.</p></div><div class="sect2 " id="sec.preliminary.philosophy.users"><div class="titlepage"><div><div><h3 class="title" id="sec.preliminary.philosophy.users"><span class="number">2.1.2 </span><span class="name">Who are the users of your cloud?</span> <a title="Permalink" class="permalink" href="#sec.preliminary.philosophy.users">#</a></h3></div></div></div><p>This question is similar to the first, but it is still worthy of considering individually. If the intended users of the cloud are not in-line with the overall goal of the cloud, then significant frustration will likely emerge. Knowing who all
                        of the intended users are and what their needs and expectations are can help you head that frustration off before it festers and impacts productivity.</p><p>If, for example, your stated goal is to provide a playground for developers, but there is also going to be a significant number of less-technical users, you will want to make sure you cater to both user groups. The less-technical users will
                        require significantly more documentation of your processes for using the cloud, and formal training may be appropriate to ensure they don't get frustrated and refuse to use it.</p></div><div class="sect2 " id="sec.preliminary.philosophy.requirements"><div class="titlepage"><div><div><h3 class="title" id="sec.preliminary.philosophy.requirements"><span class="number">2.1.3 </span><span class="name">What are your business and technical requirements?</span> <a title="Permalink" class="permalink" href="#sec.preliminary.philosophy.requirements">#</a></h3></div></div></div><p>Most enterprise IT environments have specific expectations for uptime, typically in the form of a Service-Level Agreement, or SLA. Stringent SLA's require higher budgets to accommodate higher quality and higher quantities of hardware,
                        networking, and physical infrastructure (power, cooling, disaster-recovery processes, etc). In addition, if you work in government, retail, or healthcare, you will likely have specific compliance requirements for things like PCI, HIPAA, or Common
                        Criteria and these need to be taken into account as well.</p></div><div class="sect2 " id="sec.preliminary.philosophy.constraints"><div class="titlepage"><div><div><h3 class="title" id="sec.preliminary.philosophy.constraints"><span class="number">2.1.4 </span><span class="name">What are the constraints for this project?</span> <a title="Permalink" class="permalink" href="#sec.preliminary.philosophy.constraints">#</a></h3></div></div></div><p>Every project is short on something, whether it's manpower, money, or time. This falls squarely into the realm of the old adage, “You can pick any two of fast, cheap, and high quality. You can't have all three.” Often-times ill-informed
                        management will attempt to defy the laws of physics and human nature and require all three, but realistically speaking, that's not going to happen. Understanding the priority of your constraints can help you set management expectations appropriately
                        so that you have achievable success criteria.</p></div><div class="sect2 " id="sec.preliminary.philosophy.resources"><div class="titlepage"><div><div><h3 class="title" id="sec.preliminary.philosophy.resources"><span class="number">2.1.5 </span><span class="name">What additional resources will you need?</span> <a title="Permalink" class="permalink" href="#sec.preliminary.philosophy.resources">#</a></h3></div></div></div><p>Typically it is a fairly small team that is given the charge to build out your private IaaS cloud. You will need to plan on getting input and assistance from a wide variety of other teams, such as storage, networking, and physical
                        infrastructure. Identifying whose help you will need and when you will need it allows them to plan and give your needs the full attention they require.</p></div></div></div><div class="chapter " id="cha.poc"><div class="titlepage"><div><div><h1 class="title"><span class="number">3 </span><span class="name">Performing a Proof-of-Concept</span> <a title="Permalink" class="permalink" href="#cha.poc">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.poc.steps"><span class="number">3.1 </span><span class="name">Pre-POC planning meeting</span></a></span></dt></dl></div></div><p>If you are using this guide to deploy a proof-of-concept (POC), here are some additional steps to consider.</p><div class="sect1 " id="sec.poc.steps"><div class="titlepage"><div><div><h2 class="title" id="sec.poc.steps"><span class="number">3.1 </span><span class="name">Pre-POC planning meeting</span> <a title="Permalink" class="permalink" href="#sec.poc.steps">#</a></h2></div></div></div><div class="itemizedlist "><div class="itemizedlist-title-wrap"><h6 class="itemizedlist-title"><span class="name">Before the POC begins, schedule a meeting to discuss the following topics: </span><a title="Permalink" class="permalink" href="#id1413">#</a></h6></div><ul class="itemizedlist"><li class="listitem "><p>Is the hardware you are planning to use for the proof-of-concept (POC) certified for SUSE Linux Enterprise Server? You may want to compare your planned hardware setup with the published reference architectures available at
                            <a class="link" href="https://www.suse.com/products/suse-cloud/resource-library/#RA" target="_blank">https://www.suse.com/products/suse-cloud/resource-library/#RA</a>
                        </p></li><li class="listitem "><p>Verify your intended method for installing the Admin node. Do you have physical access to the node, and if so can you use a DVD or USB drive to install? If you do not have physical access are you planning on attaching the ISO as a virtual DVD,
                            or will you be using a network-based PXE setup?</p></li><li class="listitem "><p>Confirm that the BIOS, fiber-channel cards, network cards, IPMI devices, and BMC' controllers are all updated to the latest firmware from the manufacturer.</p></li><li class="listitem "><p>Discuss the planned network, including IP address ranges, VLAN tags, Neutron plugins, and, if using the Open vSwitch plugin, the encapsulation method. Make sure there is an established schedule to have that configuration done before you begin
                            the POC.</p></li><li class="listitem "><p>Are you planning on having a highly-available control plane? If so, will there be a difference in the hardware between the POC and production? For example, in the POC you may choose to use a two-node cluster hosting all services, but in
                            production use three-node clusters and split out services onto their own individual clusters.</p></li><li class="listitem "><p>If you choose to have a highly available control plane we strongly recommend you choose teaming mode and have at least 2 NIC’s available on all nodes. We recommend that you have at least 4 for redundancy on the network stack.</p></li><li class="listitem "><p>Identify your STONITH method and verify that the appropriate resources are available to implement.</p></li><li class="listitem "><p>Source for installation media and SMT repositories (ex. USB drive brought by SE)</p></li><li class="listitem "><p>Use Admin Appliance? (Could remove the next requirement for backup/restore)</p></li><li class="listitem "><p>Backup/restore plan for the admin server if the installation must be repeated</p></li><li class="listitem "><p>What will the patching/upgrade strategy be? (update barclamp, SUSE Manager, none)</p></li><li class="listitem "><p>Build a SLE12 SP1 JeOS Live USB or ISO image using SUSE Studio with supportutils package and setup network configuration with yast at firstboot. This will come in handy for troubleshooting network issues on any hardware so that we can setup the
                            network configuration properly for crowbar.</p></li><li class="listitem "><p>On the first day of the POC:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Bring JeOS image</p></li><li class="listitem "><p>Collect a supportconfig from all systems that will be part of the cloud infrastructure</p></li><li class="listitem "><p>Use the supportconfigs to review interface map/network conduit/network info in network.json
                                    <a class="link" href="https://www.suse.com/documentation/suse-cloud-5/singlehtml/book_cloud_deploy/book_cloud_deploy.html#app.deploy.network_json" target="_blank">DG Appendix D</a>
                                </p></li></ul></div></li></ul></div></div></div><div class="chapter " id="cha.worksheet"><div class="titlepage"><div><div><h1 class="title"><span class="number">4 </span><span class="name">Worksheet</span> <a title="Permalink" class="permalink" href="#cha.worksheet">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sect.worksheet.ha"><span class="number">4.1 </span><span class="name">High-Availability</span></a></span></dt><dt><span class="sect1"><a href="#sect.worksheet.net"><span class="number">4.2 </span><span class="name">Networking</span></a></span></dt></dl></div></div><div class="sect1 " id="sect.worksheet.ha"><div class="titlepage"><div><div><h2 class="title" id="sect.worksheet.ha"><span class="number">4.1 </span><span class="name">High-Availability</span> <a title="Permalink" class="permalink" href="#sect.worksheet.ha">#</a></h2></div></div></div><p>In order to scale your cloud effectively and still provide the levels of service that your users expect, you will likely need to implement high-availability services for the control plane. The level of clustering will depend greatly on the
                    mixture of your level of paranoia, combined with the practical limits of budget, physical resources, and ability/willingness to introduce additional complexity to your implementation.</p><div class="itemizedlist "><p>If you decide to cluster, you can take two different approaches:</p><ul class="itemizedlist"><li class="listitem "><p>Build a single cluster and put all the services on it. If you need to minimize resource contention, you may introduce affinity rules to the cluster that will have it prefer to keep the active/passice services (PostgreSQL and RabbitMQ) on their
                            own server, and allow ha-proxy to load-balance the rest of the services.</p></li><li class="listitem "><p>Build multiple clusters that can each be dedicated to specific OpenStack services. This can be as simple and efficient as a single 2-node cluster for PostgreSQL/RabbitMQ, and a separate cluster for the remaining load-balanced services, or even
                            wholly-dedicated clusters for any number of services.</p></li></ul></div><p>The decision for your cluster configuration will directly impact the number of servers you will need to buy, although usually budget is the limiting factor for how many systems you can have, and you will need to optimize your resources and
                    configuration accordingly.
                    <a class="link" href="https://www.suse.com/documentation/suse-cloud-5/singlehtml/book_cloud_deploy/book_cloud_deploy.html#sec.depl.reg.ha.control" target="_blank">DG 2.6.2</a>
                </p><p>Regardless of your eventual cluster configuration, you will need to prepare shared storage for housing your PostgreSQL data, and again for RabbitMQ. What will you use for your shared storage for the database-server and rabbitmq-server? (NFS,
                    DRBD (requires an extra disk for each node in the cluster) external NAS, SAN)</p><p>DG section 2.7.5</p><p>DG section 2.7.2</p><p>The next step is to determine what mechanism you want to use for cluster fencing, or STONITH (Shoot The Other Node In The Head). The most popular fencing method is SBD, which requires a small shared block device between all the nodes in the
                    cluster. You may even want to consider multiple SBD devices via multipathing to reduce false alarms and create a more robust solution. Additional STONITH methods include integrating with the IPMI device in your server, or leveraging a
                    network-connected APC. Please note that if you decide not to use SBD for fencing that you will want to have an odd number of servers in your cluster so that quorum can be attained.</p><p>DG section 2.7.5</p></div><div class="sect1 " id="sect.worksheet.net"><div class="titlepage"><div><div><h2 class="title" id="sect.worksheet.net"><span class="number">4.2 </span><span class="name">Networking</span> <a title="Permalink" class="permalink" href="#sect.worksheet.net">#</a></h2></div></div></div><p>Networking is probably the single most important area for planning, as it is the most complex and is extremely difficult to change after deployment without having to rebuild your cloud.</p><div class="sect2 " id="sect.worksheet.net.description"><div class="titlepage"><div><div><h3 class="title" id="sect.worksheet.net.description"><span class="number">4.2.1 </span><span class="name">Understanding Network Choices</span> <a title="Permalink" class="permalink" href="#sect.worksheet.net.description">#</a></h3></div></div></div><div class="itemizedlist "><p>Therefore, prior to commencing any cloud deployment, please define the following network subnets (defaults in parentheses):</p><ul class="itemizedlist"><li class="listitem "><p>Admin (<code class="systemitem">192.168.124.0/24</code>) – Administrative network that will be used to deploy and maintain all the cloud infrastructure nodes. The size of this subnet is the upper limit to the number of
compute/control/storage nodes that can be provisioned. This network will have a PXE boot server on it, and therefore must be isolated from other networks. The TFTP service required for PXE does not understand VLAN tags, so it must appear as an
untagged network (ie - trunk the ports).</p></li><li class="listitem "><p>BMC (<code class="systemitem">192.168.124.0/24</code>) – Administrative network for accessing IPMI devices for the cloud infrastructure. It must be on the same subnet as the admin network unless you use a VLAN.</p></li><li class="listitem "><p>Fixed (<code class="systemitem">192.168.123.0/24 – tag 500</code>) – Cloud-wide network that most cloud instances will connect to in order to interact with each other and the outside world. While some number of systems may exist in
isolated networks and are never connected to the fixed network, generally speaking the range of this subnet defines the maximum number of concurrent cloud workloads that can be run.</p></li><li class="listitem "><p>SDN (<code class="systemitem">192.168.130.0/24 – tag 700</code>) – Cloud-wide network that will be used for the software-defined networking stack. The subnet for this needs to be at least as large as the admin network.</p></li><li class="listitem "><p>Storage (<code class="systemitem">192.168.125.0/24 – tag 200</code>) – Network used for communicating with Swift storage nodes. Even if there are no plans to use Swift, the Admin server still requires that this network be defined. If
you opt to use SUSE Enterprise Storage and deploy it via the cloud admin node, it may live on this network as well. It is generally, however, a better idea to deploy SUSE Enterprise Storage as its own stand-alone service and integrate it with your
cloud, allowing it to provide storage to other areas in your datacenter besides just your cloud.</p></li><li class="listitem "><p>Public (<code class="systemitem">192.168.126.0/24 – tag 300</code>) – Used for exposing OpenStack services and APIs to external users. Must be routable on your existing LAN. Only the control node servers will be on this network, so a small address space may be used when defining the DHCP range.</p></li><li class="listitem "><p>Floating (<code class="systemitem">192.168.126.0/24 – tag 300</code>) – Used for exposing cloud instances externally. Must be the same subnet as the public network. The number of IP's designated for this network will be the hard upper
limit for the number of cloud instances that can be concurrently exposed outside of your cloud.</p></li></ul></div></div><div class="sect2 " id="sec.worksheet.net.tables"><div class="titlepage"><div><div><h3 class="title" id="sec.worksheet.net.tables"><span class="number">4.2.2 </span><span class="name">Network Tables</span> <a title="Permalink" class="permalink" href="#sec.worksheet.net.tables">#</a></h3></div></div></div><div class="table" id="id1498"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 4.1: </span><span class="name">Admin/BMC Network Address Allocation </span><a title="Permalink" class="permalink" href="#id1498">#</a></h6></div><div class="table-contents"><table class="table" summary="Admin/BMC Network Address Allocation" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><thead><tr><th>
                                        <p>Function</p>
                                    </th><th>
                                        <p>Default Address(es)</p>
                                    </th><th>
                                        <p>VLAN</p>
                                    </th><th>
                                        <p>IP Address(es)</p>
                                    </th><th>
                                        <p>Notes</p>
                                    </th></tr></thead><tbody><tr><td>
                                        <p>Netmask</p>
                                    </td><td>
                                        <p>255.255.255.0</p>
                                    </td><td>
                                        <p>N/A</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>router</p>
                                    </td><td>
                                        <p>192.168.124.1</p>
                                    </td><td>
                                        <p>None</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>admin</p>
                                    </td><td>
                                        <p>192.168.124.10-11</p>
                                    </td><td>
                                        <p>None</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>DHCP</p>
                                    </td><td>
                                        <p>192.168.124.21-80</p>
                                    </td><td>
                                        <p>None</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>Host</p>
                                    </td><td>
                                        <p>192.168.124.81-160</p>
                                    </td><td>
                                        <p>None</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>BMC VLAN host</p>
                                    </td><td>
                                        <p>192.168.124.161</p>
                                    </td><td>
                                        <p>100</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p>Optional - If the IPMI devices are already configured on a VLAN and you do not wish to change their configuration, use this network.</p>
                                    </td></tr><tr><td>
                                        <p>BMC host</p>
                                    </td><td>
                                        <p>192.168.124.162-240</p>
                                    </td><td>
                                        <p>None</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>Switch</p>
                                    </td><td>
                                        <p>192.168.124.241-250</p>
                                    </td><td>
                                        <p>None</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr></tbody></table></div></div><div class="table" id="id1607"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 4.2: </span><span class="name">Bastion Network Address Allocation </span><a title="Permalink" class="permalink" href="#id1607">#</a></h6></div><div class="table-contents"><table class="table" summary="Bastion Network Address Allocation" width="100%" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><thead><tr><th>
                                        <p>Subnet</p>
                                    </th><th>
                                        <p>Gateway</p>
                                    </th><th>
                                        <p>DNS</p>
                                    </th><th>
                                        <p>IP Address</p>
                                    </th><th>
                                        <p>Proxy</p>
                                    </th></tr></thead><tbody><tr><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr></tbody></table></div></div><div class="table" id="id1639"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 4.3: </span><span class="name">Storage Network Address Allocation </span><a title="Permalink" class="permalink" href="#id1639">#</a></h6></div><div class="table-contents"><table class="table" summary="Storage Network Address Allocation" width="100%" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><thead><tr><th>
                                        <p>Function</p>
                                    </th><th>
                                        <p>Default Address(es)</p>
                                    </th><th>
                                        <p>VLAN</p>
                                    </th><th>
                                        <p>IP Address(es)</p>
                                    </th><th>
                                        <p>Notes</p>
                                    </th></tr></thead><tbody><tr><td>
                                        <p>host</p>
                                    </td><td>
                                        <p>192.168.125.10-239</p>
                                    </td><td>
                                        <p>200</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr></tbody></table></div></div><div class="table" id="id1671"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 4.4: </span><span class="name">Fixed Network Address Allocation </span><a title="Permalink" class="permalink" href="#id1671">#</a></h6></div><div class="table-contents"><table class="table" summary="Fixed Network Address Allocation" width="100%" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><thead><tr><th>
                                        <p>Function</p>
                                    </th><th>
                                        <p>Default Address(es)</p>
                                    </th><th>
                                        <p>VLAN</p>
                                    </th><th>
                                        <p>IP Address(es)</p>
                                    </th><th>
                                        <p>Notes</p>
                                    </th></tr></thead><tbody><tr><td>
                                        <p>Netmask</p>
                                    </td><td>
                                        <p>255.255.255.0</p>
                                    </td><td>
                                        <p>N/A</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>router</p>
                                    </td><td>
                                        <p>192.168.123.1-49</p>
                                    </td><td>
                                        <p>500</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>dhcp</p>
                                    </td><td>
                                        <p>192.168.123.50-254</p>
                                    </td><td>
                                        <p>500</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr></tbody></table></div></div><div class="table" id="id1725"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 4.5: </span><span class="name">Public/Floating Network Address Allocation </span><a title="Permalink" class="permalink" href="#id1725">#</a></h6></div><div class="table-contents"><table class="table" summary="Public/Floating Network Address Allocation" width="100%" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><thead><tr><th>
                                        <p>Function</p>
                                    </th><th>
                                        <p>Default Address(es)</p>
                                    </th><th>
                                        <p>VLAN</p>
                                    </th><th>
                                        <p>IP Address(es)</p>
                                    </th><th>
                                        <p>Notes</p>
                                    </th></tr></thead><tbody><tr><td>
                                        <p>Netmask</p>
                                    </td><td>
                                        <p>255.255.255.0</p>
                                    </td><td>
                                        <p>N/A</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>router</p>
                                    </td><td>
                                        <p>192.168.126.1</p>
                                    </td><td>
                                        <p>500</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>public host</p>
                                    </td><td>
                                        <p>192.168.126.2-49</p>
                                    </td><td>
                                        <p>300</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>public dhcp</p>
                                    </td><td>
                                        <p>192.168.126.50-127</p>
                                    </td><td>
                                        <p>300</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>floating host</p>
                                    </td><td>
                                        <p>192.168.126.129-191</p>
                                    </td><td>
                                        <p>300</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr></tbody></table></div></div><div class="table" id="id1801"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 4.6: </span><span class="name">Software-Defined Networking (SDN) Address Allocation </span><a title="Permalink" class="permalink" href="#id1801">#</a></h6></div><div class="table-contents"><table class="table" summary="Software-Defined Networking (SDN) Address Allocation" width="100%" border="1"><colgroup><col class="1" /><col class="2" /><col class="3" /><col class="4" /><col class="5" /></colgroup><thead><tr><th>
                                        <p>Function</p>
                                    </th><th>
                                        <p>Default Address(es)</p>
                                    </th><th>
                                        <p>VLAN</p>
                                    </th><th>
                                        <p>IP Address(es)</p>
                                    </th><th>
                                        <p>Notes</p>
                                    </th></tr></thead><tbody><tr><td>
                                        <p>Netmask</p>
                                    </td><td>
                                        <p>255.255.255.0</p>
                                    </td><td>
                                        <p>N/A</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr><tr><td>
                                        <p>host</p>
                                    </td><td>
                                        <p>192.168.130.10-254</p>
                                    </td><td>
                                        <p>700</p>
                                    </td><td>
                                        <p> </p>
                                    </td><td>
                                        <p> </p>
                                    </td></tr></tbody></table></div></div></div><div class="sect2 " id="sec.worksheet.hypervisor"><div class="titlepage"><div><div><h3 class="title" id="sec.worksheet.hypervisor"><span class="number">4.2.3 </span><span class="name">Compute Infrastructure Information</span> <a title="Permalink" class="permalink" href="#sec.worksheet.hypervisor">#</a></h3></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="id1847"><span class="term ">Hypervisor(s)</span></dt><dd><p>With which hypervisor or hypervisors do you intend to deploy and integrate?</p><div class="itemizedlist "><p>Options include:</p><ul class="itemizedlist"><li class="listitem "><p>KVM</p></li><li class="listitem "><p>Xen</p></li><li class="listitem "><p>VMware vSphere</p></li><li class="listitem "><p>Hyper-V</p></li><li class="listitem "><p>zVM</p></li><li class="listitem "><p>Bare metal</p></li></ul></div><div id="id1865" class="admonition caution"><img class="symbol" alt="Caution" title="Caution" src="static/images/icon-caution.png" /><h6>Caution</h6><p>OpenStack security groups are currently implemented via iptables for non-proprietary software-defined networking stacks (Open vSwitch, Linuxbridge, Flat).  As such, non-Linux hosts (VMware, Hyper-V, zVM) will not take advantage of these security groups and will have to handle firewall rules inside the guest workload using their native toolsets.</p></div><p> </p><p>______________________________________________</p></dd><dt id="id1869"><span class="term ">Containers</span></dt><dd><p>If you intend to manage containers with this implementation, which deployment/management model(s) do you intend to use?</p><div class="itemizedlist "><p>Options include:</p><ul class="itemizedlist"><li class="listitem "><p>Bare metal (dedicated Docker host)</p></li><li class="listitem "><p>Virtualized (via the
                                            <span class="application ">Magnum</span>
                                            service)</p></li></ul></div><div id="id1880" class="admonition caution"><img class="symbol" alt="Caution" title="Caution" src="static/images/icon-caution.png" /><h6>Caution</h6><p>The nova-docker plugin for doing Docker deployments to bare metal, outside of an orchestration service like Heat or Magnum, has been deprecated and will eventually be removed from the product.</p></div><p> </p><p>______________________________________________</p></dd></dl></div></div><div class="sect2 " id="sec.worksheet.net.misc"><div class="titlepage"><div><div><h3 class="title" id="sec.worksheet.net.misc"><span class="number">4.2.4 </span><span class="name">Additional Network Information</span> <a title="Permalink" class="permalink" href="#sec.worksheet.net.misc">#</a></h3></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="id1887"><span class="term ">Interface Mode</span></dt><dd><p>Which network mode will you will be using? ((Single, Dual, Teaming) Remember to take into account whether you are using a highly available control plane or not, if so then you should choose Teaming) DG 2.1.2</p><p> </p><p>______________________________________________</p></dd><dt id="id1893"><span class="term ">FQDN</span></dt><dd><p>Fully Qualified Domain Name (FQDN) of the Admin server (cannot be changed after deployment).</p><p> </p><p>______________________________________________</p></dd><dt id="id1899"><span class="term ">External DNS</span></dt><dd><p>Are there additional DNS servers you want SUSE Cloud to forward to for non-local DNS records?</p><p> </p><p>______________________________________________</p></dd><dt id="id1905"><span class="term ">
                                <span class="application ">Neutron</span>
                                L2 Plugin</span></dt><dd><p>Which plugin do you wish to use for your software-defined networking stack?</p><div class="itemizedlist "><p>Options include:</p><ul class="itemizedlist"><li class="listitem "><p>Open vSwitch (Default)</p></li><li class="listitem "><p>Linuxbridge</p></li><li class="listitem "><p>VMware NSX</p></li><li class="listitem "><p>Cisco Nexus</p></li><li class="listitem "><p>Cisco ACI</p></li><li class="listitem "><p>Midokura</p></li></ul></div><div id="id1924" class="admonition caution"><img class="symbol" alt="Caution" title="Caution" src="static/images/icon-caution.png" /><h6>Caution</h6><p>VMware only supports vSphere as part of an OpenStack implementation if used with their NSX SDN.</p></div><p> </p><p>______________________________________________</p></dd><dt id="id1928"><span class="term "><span class="application ">Neutron</span>
                            Encapsulation Plugin</span></dt><dd><p>Which packet encapsulation protocol do you wish to use for your software-defined networking stack?</p><div class="itemizedlist "><p>Options include:</p><ul class="itemizedlist"><li class="listitem "><p>GRE(default)</p></li><li class="listitem "><p>VXLAN</p></li><li class="listitem "><p>VLAN</p></li><li class="listitem "><p>Flat/None</p></li></ul></div><div id="id1943" class="admonition caution"><img class="symbol" alt="Caution" title="Caution" src="static/images/icon-caution.png" /><h6>Caution</h6><p>The GRE plugin is incompatible with VMware and Hyper-V</p></div><p> </p><p>______________________________________________</p></dd></dl></div></div><div class="sect2 " id="sec.worksheet.storage"><div class="titlepage"><div><div><h3 class="title" id="sec.worksheet.storage"><span class="number">4.2.5 </span><span class="name">Storage Information</span> <a title="Permalink" class="permalink" href="#sec.worksheet.storage">#</a></h3></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="id1950"><span class="term ">Image Repository</span></dt><dd><p>Which storage plugin do you wish to use for your image repository (<span class="application ">Glance</span>)
                            </p><div class="itemizedlist "><p>Options include:</p><ul class="itemizedlist"><li class="listitem "><p>Local</p></li><li class="listitem "><p>Ceph RBD</p></li><li class="listitem "><p>Swift</p></li></ul></div><p> </p><p>______________________________________________</p></dd><dt id="id1965"><span class="term ">Block Storage</span></dt><dd><p>What storage service do you wish to use as the backend for your block storage (<span class="application ">Cinder</span>)</p><div class="itemizedlist "><p>Options include:</p><ul class="itemizedlist"><li class="listitem "><p>Local</p></li><li class="listitem "><p>Ceph RBD</p></li><li class="listitem "><p>NetApp</p></li><li class="listitem "><p>Fujitsu</p></li><li class="listitem "><p>EMC</p></li><li class="listitem "><p>EqualLogic</p></li><li class="listitem "><p>VMware</p></li></ul></div><p> </p><p>______________________________________________</p></dd></dl></div></div><div class="sect2 " id="sec.worksheet.smt"><div class="titlepage"><div><div><h3 class="title" id="sec.worksheet.smt"><span class="number">4.2.6 </span><span class="name">Package Source Information</span> <a title="Permalink" class="permalink" href="#sec.worksheet.smt">#</a></h3></div></div></div><div class="variablelist "><dl class="variablelist"><dt id="id1991"><span class="term ">Subscription-Management Tool (SMT)</span></dt><dd><p>Will you utilize an existing SMT server or install one on the admin node? If existing, then indicate the FQDN below.</p><p> </p><p>______________________________________________</p></dd><dt id="id1997"><span class="term ">SUSE Manager</span></dt><dd><p>As an alternative to SMT, do you wish to use SUSE Manager as the source for your packages? If so, then indicate the FQDN below.</p><p> </p><p>______________________________________________</p></dd></dl></div></div></div></div><div class="chapter " id="cha.production"><div class="titlepage"><div><div><h1 class="title"><span class="number">5 </span><span class="name">Going from Proof-of-Concept to Production</span> <a title="Permalink" class="permalink" href="#cha.production">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="#sec.production.patching"><span class="number">5.1 </span><span class="name">Patching Strategy</span></a></span></dt><dt><span class="sect1"><a href="#sec.production.operations"><span class="number">5.2 </span><span class="name">Operational Planning</span></a></span></dt></dl></div></div><div class="sect1 " id="sec.production.patching"><div class="titlepage"><div><div><h2 class="title" id="sec.production.patching"><span class="number">5.1 </span><span class="name">Patching Strategy</span> <a title="Permalink" class="permalink" href="#sec.production.patching">#</a></h2></div></div></div><p>Identify a strategy for how you plan to patch your cloud infrastructure</p><div class="variablelist "><dl class="variablelist"><dt id="id2009"><span class="term ">Updater barclamp</span></dt><dd><p>The admin node has an "Updater" barclamp available which can be set to automatically deliver patches to the underlying cloud infrastructure servers (<span class="emphasis"><em>NOT</em></span> the guest workloads).</p><div class="orderedlist "><p>These patches will automaatically be distributed when the following criteria have been met:</p><ol class="orderedlist" type="1"><li class="listitem "><p>They are available in the repositories the admin server is using for provisioning systems</p></li><li class="listitem "><p>They fit the criteria identified in the barclamp</p></li><li class="listitem "><p>The infrastructure server initiates its chef-client run to verify its configuration</p></li></ol></div></dd></dl></div></div><div class="sect1 " id="sec.production.operations"><div class="titlepage"><div><div><h2 class="title" id="sec.production.operations"><span class="number">5.2 </span><span class="name">Operational Planning</span> <a title="Permalink" class="permalink" href="#sec.production.operations">#</a></h2></div></div></div><p>What are the environmental and logistical differences between your proof-of-concept environment for which you will need to adjust your configuration?</p><div class="variablelist "><dl class="variablelist"><dt id="id2026"><span class="term ">Networking</span></dt><dd><p>Subnets and VLANs</p></dd><dt id="id2030"><span class="term ">Physical Infrastructure</span></dt><dd><p>Availability zones</p></dd><dt id="id2034"><span class="term ">Control Plane</span></dt><dd><p>Clustering</p></dd><dt id="id2038"><span class="term ">Authentication</span></dt><dd><p>Active Directory</p></dd><dt id="id2042"><span class="term ">Third-Party applications</span></dt><dd><p>SUSE Studio</p></dd></dl></div></div></div></div></div><div class="page-bottom"><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2017 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>